(()=>{"use strict";(()=>{const e=document.querySelector(".modal-callback"),t=document.querySelector(".modal-overlay");document.addEventListener("click",(o=>{let s=o.target;(s.matches("#popupBtn")||s.matches(".button-services")||s.matches(".absolute"))&&(t.style.display="block",e.style.display="block")})),document.addEventListener("click",(o=>{let s=o.target;(s.parentNode.classList.contains("modal-close")||s.closest(".modal-overlay"))&&(e.style.display="none",t.style.display="none")}))})(),(()=>{const e=document.querySelectorAll("li>a");for(const t of e)t.addEventListener("click",(e=>{e.preventDefault();const o=t.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}));let t=document.querySelector(".up");const o=document.documentElement.clientHeight;t.style.display="none",t.addEventListener("click",(()=>{document.querySelector("body").scrollIntoView({behavior:"smooth",block:"start"})})),window.addEventListener("scroll",(()=>{document.body.scrollTop>o||document.documentElement.scrollTop>o?t.style.display="block":t.style.display="none"}))})(),(()=>{const e=document.querySelectorAll(".title"),t=t=>{let o=t.target.closest(".title");for(let t=0;t<e.length;t++)e[t].parentNode.classList.remove("active"),e[t].nextElementSibling.style.display="none";o.nextElementSibling.style.display="block",o.parentNode.classList.add("active")};e.forEach((e=>{e.addEventListener("click",t)}))})(),(()=>{const e=e=>{const t=e.target;t.matches(".tel")&&(t.value=t.value.replace(/[^\+\d]/g,"")),"fio"===t.name&&(t.value=t.value.replace(/[^а-яё]/gi,""))};(t=>{const o=document.getElementById(t),s=document.createElement("div"),l=e=>{const t=document.createElement("img"),o={load:{message:" Загрузка...",img:"./images/message/waiting.gif"},error:{message:" Что-то пошло не так...",img:"./images/message/Err.png"},success:{message:" Спасибо! Мы скоро с вами свяжемся!",img:"./images/message/OK.png"}};s.textContent=o[e].message,t.src=o[e].img,t.height=50,s.insertBefore(t,s.firstChild)};function n(){s.parentNode.removeChild(s)}s.style.cssText="font-size: 2rem; color: red",o.addEventListener("submit",(e=>{const t=document.querySelector(".popup");var c;e.preventDefault(),l("load"),o.appendChild(s),(c=Object.fromEntries(new FormData(o)),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).then((e=>{if(200!==e.status)throw new Error("Status network ${request.status}");l("success"),[...document.getElementById("form-callback").elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type)).forEach((e=>e.value="")),t.style.display="none",setTimeout(n,3e3)})).catch((e=>{l("error"),setTimeout(n,3e3),console.error(e)}))})),o.addEventListener("input",e)})("form-callback")})()})();